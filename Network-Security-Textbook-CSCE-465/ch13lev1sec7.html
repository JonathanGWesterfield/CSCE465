<html><head><title>13.7. Interrealm Authentication</title><title>TeamUnknown</title><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><link rel="STYLESHEET" type="text/css" href="portals/bvdep/xsltemplates/globalstyle.css" /><link href="includes/searchResults.css" rel="stylesheet" type="text/css" /><link rel="STYLESHEET" type="text/css" href="portals/bvdep/xsltemplates/style.css" /><link rel="STYLESHEET" type="text/css" href="portals/bvdep/xsltemplates/docsafari.css" /><body><table width="100%" border="0" cellspacing="0" cellpadding="0"><td class="docBookTitle"><a href="toc.html"><b>[ Team Unknown ]</b></a></td></table><td align="center"><a name="MainContent"></a><table width="95%"><tr><td align="left" class="v2"><!--Copyright (c) 2002 Safari Tech Books Online--><table width="100%" border="0" cellspacing="0" cellpadding="2"><tr><td valign="middle" class="v2" height="5"><img src="pixel.gif" width="1" height="5" alt="" border="0" /></td></tr><tr><td valign="middle" class="v2"><table cellpadding="0" cellspacing="0" border="0" width="100%"><tr><td align="left"><span style="white-space:nowrap">&nbsp;</span>
                  &nbsp;
                  <span style="white-space:nowrap"> &nbsp;&nbsp;</span>
            &nbsp;<span style="white-space:nowrap">&nbsp;</span></td></tr></table></td><td></td><td valign="middle" class="v2" align="right"> 
          &nbsp;
          <span style="white-space:nowrap"><a target="_self" href="ch13lev1sec6.html" title="Previous section"><img border="0" align="absmiddle" src="btn_prev.gif" alt="Previous section" id="btn_prev" /></a></span>
				
				&nbsp;
				
				<span style="white-space:nowrap"><a target="_self" href="ch13lev1sec8.html" title="Next section"><img border="0" align="absmiddle" src="btn_next.gif" alt="Next section" id="btn_next" /></a></span></td></tr></table><div id="section"><br /><table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td valign="top"><a href="16051538.html"><img src="pixel.gif" alt="" width="1" height="1" border="0" /></a>Networking Security Networking Security Networking Security Security Networking Security Networking Security Networking Charlie Kaufman Radia Perlman Mike Speciner Prentice Hall Network Security: Private Communication in a Public World, Second Edition<a name="ch13lev1sec7"></a>
<h3 id="title-IDAPRX44" class="docSection1Title">13.7. Interrealm Authentication</h3>
<p class="docText">Suppose the world is partitioned into <span class="docEmphasis">n</span> different Kerberos realms. It might be the case that principals in one realm need to authenticate principals in another realm. This is supported by Kerberos. The way it works is that the KDC in realm <span class="docEmphasis">B</span> can be registered as a principal in realm <span class="docEmphasis">A</span>. This allows users in realm <span class="docEmphasis">A</span> to access realm <span class="docEmphasis">B</span>'s KDC as if it were any other resource in realm <span class="docEmphasis">A</span>.</p>
<p class="docText">Suppose Alice, in realm <span class="docEmphRomanAlt">Wonderland</span>, wishes to communicate securely to Dorothy in realm <span class="docEmphRomanAlt">Oz</span>. Alice (or rather her workstation, on her behalf) notices that Dorothy is in a different realm. She asks her KDC for a ticket to the KDC in realm <span class="docEmphRomanAlt">Oz</span> (see <a class="docLink" href="#ch13fig04">Figure 13-4</a>). If the managers of Wonderland and Oz have decided to allow this, the KDC in Oz will be registered as a principal in Wonderland, and the Wonderland KDC will have assigned a master key to Oz's KDC. Wonderland's KDC will give Alice a ticket (encrypted with that master key) to the KDC in Oz. Then Alice sends a TGS_REQ to Oz's KDC. The message lists <span class="docEmphRomanAlt">Wonderland</span> as the source realm, which tells Oz's KDC what key to use to decrypt the ticket. The Oz KDC then issues a ticket for Alice to talk to Dorothy.</p>
<p class="docText">After Alice sends this ticket to Dorothy, Alice and Dorothy will know they are talking to each other, and they will have a key <span class="docEmphasis">K</span><sub>A-D</sub> they can use to protect data they send back and forth, exactly as if they were in the same realm.</p>
<p class="docText">It doesn't work in Kerberos V4 to start in realm <span class="docEmphasis">A</span>, get a ticket to realm <span class="docEmphasis">B</span>, and from there get a ticket to realm <span class="docEmphasis">C</span>. In order for a principal in realm <span class="docEmphasis">A</span> to talk to a principal in realm <span class="docEmphasis">C</span>, <span class="docEmphasis">C</span>'s KDC has to be registered as a principal in realm <span class="docEmphasis">A</span>. What prevents going from realm <span class="docEmphasis">A</span> to <span class="docEmphasis">C</span> through <span class="docEmphasis">B</span>? Suppose realms <span class="docEmphasis">A</span> and <span class="docEmphasis">B</span> share a key, and realms <span class="docEmphasis">B</span> and <span class="docEmphasis">C</span> share a key, but <span class="docEmphasis">A</span> and <span class="docEmphasis">C</span> do not share a key. Suppose Alice@<span class="docEmphasis">A</span> would like to talk to Carol@<span class="docEmphasis">C</span>. Alice can indeed get a ticket to <span class="docEmphasis">B</span>, since <span class="docEmphasis">B</span> is registered as a principal in realm <span class="docEmphasis">A</span>. Then, with a ticket to <span class="docEmphasis">B</span>, Alice can request, from <span class="docEmphasis">B</span>, a ticket to <span class="docEmphasis">C</span>. <span class="docEmphasis">B</span> <a name="iddle1546"></a><a name="iddle2061"></a>will comply, since <span class="docEmphasis">B</span> thinks of <span class="docEmphasis">C</span> as just another principal in realm <span class="docEmphasis">B</span>. But then when <span class="docEmphasis">A</span> attempts to ask <span class="docEmphasis">C</span> for a ticket to Carol, the TGS_REQ she sends <span class="docEmphasis">C</span> will have the <span class="docEmphSmaller">REALM</span> field as <span class="docEmphasis">B</span> (so that <span class="docEmphasis">C</span> will know what key to use to decrypt the ticket), and in the ticket, Alice's realm will be <span class="docEmphasis">A</span>. <span class="docEmphasis">C</span> will refuse to issue a ticket for Carol since the two realms don't match. (See &sect;<a class="docLink" href="ch13lev1sec12.html#ch13lev2sec7">13.12.5</a> <span class="docEmphasis">TGS_REQ</span> for a description of the fields in the TGS_REQ.)</p>
<a name="ch13fig04"></a><p><center>
<h5 class="docFigureTitle">Figure 13-4. Interrealm authentication</h5>
</center></p><p class="docText">
<img border="0" alt="" width="500" height="245" src="13fig04.jpg" /></p>
<br />
<p class="docText">Kerberos V4 deliberately prevents access through a chain of KDCs. If it didn't, then a rogue KDC could impersonate not only its own users, but those of any other realm, by claiming to be the penultimate KDC in a chain.</p>
<a href="16051538.html"><img src="pixel.gif" alt="" width="1" height="1" border="0" /></a><ul></ul></td></tr></table><table width="100%" border="0" cellspacing="0" cellpadding="2"><tr><td valign="middle" class="v2" height="5"><img src="pixel.gif" width="1" height="5" alt="" border="0" /></td></tr><tr><td valign="middle" class="v2"><table cellpadding="0" cellspacing="0" border="0" width="100%"><tr><td align="left"><span style="white-space:nowrap">&nbsp;</span>
                  &nbsp;
                  <span style="white-space:nowrap"> &nbsp;&nbsp;</span>
            &nbsp;<span style="white-space:nowrap">&nbsp;</span></td></tr></table></td><td></td><td valign="middle" class="v2" align="right"> 
          &nbsp;
          <span style="white-space:nowrap"><a target="_self" href="ch13lev1sec6.html" title="Previous section"><img border="0" align="absmiddle" src="btn_prev.gif" alt="Previous section" id="btn_prev" /></a></span>
				
				&nbsp;
				
				<span style="white-space:nowrap"><a target="_self" href="ch13lev1sec8.html" title="Next section"><img border="0" align="absmiddle" src="btn_next.gif" alt="Next section" id="btn_next" /></a></span></td></tr></table><table width="100%" border="0" cellspacing="0" cellpadding="2"><tr><td valign="top" align="right"><span style="white-space:nowrap"><a target="_self" href="#toppage" title="Top"></a></span></td></tr></table></div><!--IP User 2--></td></tr></table></td></body></head></html>